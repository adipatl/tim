"use strict";ons.bootstrap().service("PhoneGapService",function(){return{alert:function(e){navigator&&navigator.notification.alert(e)},pickContact:function(e){if("function"==typeof e)if(navigator&&navigator.contacts){var t={};navigator.contacts.pickContact(function(n){if(t.name=function(e){if(!e)return null;if(e.displayName&&e.displayName.length>0)return e.displayName;var t="";return e.name&&(e.name.givenName&&e.name.givenName.length>0&&(t+=e.name.givenName),e.name.familyName&&e.name.familyName.length>0&&(t.length>0&&(t+=" "),t+=e.name.familyName)),t}(n),n.emails)if(1===n.emails.length)t.email=n.emails[0].value,e(t);else if(n.emails.length>1){for(var o=[],a=0;a<n.emails.length;++a)o.push(n.emails[a].value);navigator.notification.confirm("Please select email for this customer",function(o){o&&o>0&&(t.email=n.emails[o-1].value,e(t))},"Select email",o)}},function(e){console.log("Error: "+e)})}else console.log("cordova is not loaded")}}}).service("ConfigService",function(){return{getUrl:function(e,t){var n="";return t&&(n=t.employeeId),"training"===e?"http://data-capture.financial.thomsonreuters.com/go?iv=t4cqtyisrcp9&q11="+n:"meeting"===e?"http://data-capture.financial.thomsonreuters.com/go?iv=384s5oqum0qd6&q2="+n:"opportunity"===e?"http://data-capture.financial.thomsonreuters.com/go?iv=2bsqu91m0xhbo":"clientfeedback"===e?"http://data-capture.financial.thomsonreuters.com/go?iv=1s5p8l5gk7w22&q2="+n:"contentenh"===e?"http://data-capture.financial.thomsonreuters.com/go?iv=1wi4x8k9kn4z2&q2="+n:"productenh"===e?"http://data-capture.financial.thomsonreuters.com/go?iv=3hh23k27tplyw&q2="+n:""},getTitle:function(e){return"training"===e?"Training Event":"meeting"===e?"Meeting Event":"opportunity"===e?"Opportunity Event":"clientfeedback"===e?"Client Feedback":"contentenh"===e?"Content Enhancement":"productenh"===e?"Product Enhancement":""}}}).service("ContactService",["PhoneGapService",function(e){var t=[];return{add:function(e,n){t.push(n),e.$apply()},remove:function(e,n){e.carousel[n].prev({animation:"none"}),t.splice(n,1)},reset:function(e){t.length=0,e.$apply()},myArray:t,pickContact:function(t,n){"function"==typeof t&&e.pickContact(function(e){console.log(e),t(e)})}}}]).controller("MailController",["$scope","ContactService","ConfigService",function(e,t,n){e.remove=function(n){t.remove(e,n)},e.myArray=t.myArray,e.maxSupportedItem=1,e.pickContact=function(){t.pickContact(function(n){t.add(e,n)})},e.submit=function(){var e=window.localStorage;console.log(e.getItem("tim-employeeId"));var t=document.getElementById("content"),o=n.getUrl(t.topPage.data.content.nextPageId,{employeeId:e.getItem("tim-employeeId")});window.open(o,"_system")};this.init=function(n){console.log("init - mail");var o=document.getElementById("content");console.log("data: "+JSON.stringify(o.topPage.data)),e.maxSupportedItem=1,o.topPage.data.content.maxItem&&(e.maxSupportedItem=parseInt(o.topPage.data.content.maxItem)),t.reset(e)},e.getTitleLabel=function(){var e=document.getElementById("content").topPage.data.content.nextPageId;return n.getTitle(e)}}]),document.addEventListener("init",function(e){var t,n="tim-employeeId",o=function(e,t){window.localStorage.setItem(e,t)},a=function(e){console.log("go to "+e),document.querySelector("#myNavigator").pushPage(e)},i=function(e){console.log("reset to "+e),document.querySelector("#myNavigator").resetToPage(e)},c=(t=n,window.localStorage.getItem(t)),l=e.target;if("login"===l.id){var r=document.getElementById("loggingInElement");if("string"==typeof c&&c.length>0)return r.show(),void setTimeout(function(){a("landing.html")},100);var m=document.getElementById("employee-id"),u=document.getElementById("next");m.onkeyup=function(e){u.disabled=m.value.length<=0},u.onclick=function(e){o(n,m.value),r.show(),a("landing.html")}}else{if(l.id.startsWith("content")){var g=document.getElementById("menu"),d=document.getElementById("menu-button"),s=document.getElementById("menu-home"),f=document.getElementById("menu-reset");d&&(d.onclick=function(e){g.open()}),s&&(s.onclick=function(e){i("login.html")}),f&&(f.onclick=function(e){o(n,""),i("login.html")})}var p=function(e){var t=e.srcElement.dataset.nextPage+".html",n=e.srcElement.dataset,o=document.getElementById("content"),a=document.getElementById("menu"),i={data:{content:n}};o.resetToPage(t,i).then(a.close.bind(a))};if("content-home"===l.id)for(var v=document.getElementsByTagName("ons-button"),h=0;h<v.length;h++)v[h].onclick=p}});